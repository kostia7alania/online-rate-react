{"version":3,"sources":["store/index.js","features/rates/ducks.js","features/rates/api.js","features/rates/selectors.js","features/rates/sagas.js","features/rates/components/RatesChart.js","features/rates/components/RatesTable/RatesTable.js","features/rates/containers/RatesView.js","features/rates/index.js","reducers.js","sagas.js","store/store.prod.js","app.js","index.js"],"names":["module","exports","require","ratesSlice","createSlice","name","initialState","reducers","ratesAddRate","state","action","payload","usd","eur","time","push","ratesResetRates","settingsSlice","interval","maxRows","ratesSetInterval","ratesSetMaxRows","actions","ratesReducer","combineReducers","rates","reducer","settings","fetchRatesUsdEur","randomize","min","max","Math","random","fetch","then","response","json","data","Valute","USD","EUR","Value","ratesReducerSelect","ratesIntervalSelect","ratesDataSelect","ratesDataLimitedSelect","createSelector","slice","ratesSaga","select","Date","getTime","call","put","delay","RatesChart","usdKey","eurKey","timeKey","length","width","height","margin","top","right","left","bottom","strokeDasharray","dataKey","tickFormatter","unixTime","format","domain","type","labelFormatter","stroke","RatesTable","hasData","className","map","key","toFixed","RatesView","useSelector","rows","rootReducer","rootSaga","fork","sagaMiddleware","createSagaMiddleware","configureAppStore","preloadedState","store","createStore","applyMiddleware","run","configureStore","App","ReactDOM","render","document","queryQuerySelector"],"mappings":"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","file":"static/js/main.4afe2451.chunk.js","sourcesContent":["if (process.env.NODE_ENV === 'production') {\n  module.exports = require('./store.prod')\n} else {\n  module.exports = require('./store.dev')\n}","import { createSlice } from '@reduxjs/toolkit';\nimport { combineReducers } from 'redux';\n\nconst ratesSlice = createSlice({\n  name: 'features/rates',\n  initialState: [],\n  reducers: {\n    ratesAddRate(state, action) {\n      const { usd, eur, time } = action.payload;\n      state.push({\n        usd,\n        eur,\n        time\n      });\n    },\n    ratesResetRates: () => []\n  }\n});\n\n\nconst settingsSlice = createSlice({\n  name: 'features/rates',\n  initialState: {\n    interval: 2,\n    maxRows: 10,\n  },\n  reducers: {\n    ratesSetInterval: (state, interval) => state.interval = interval,\n    ratesSetMaxRows: (state, maxRows) => state.maxRows = maxRows,\n  }\n});\n\nexport const { ratesAddRate, ratesResetRates } = ratesSlice.actions;\nexport const { ratesSetInterval, ratesSetMaxRows } = settingsSlice.actions;\nexport const ratesReducer = combineReducers({\n  rates: ratesSlice.reducer,\n  settings: settingsSlice.reducer\n});\n","const fetchRates = () => {\n  return fetch(`http://www.cbr-xml-daily.ru/daily_json.js`)\n    .then((response) => response.json())\n    .then(data => data.Valute)\n    .then(({ USD, EUR }) => [USD.Value, EUR.Value]);\n}\n\n// добавил рандомчика\nconst fetchRatesUsdEur = () => {\n  const randomize = (min, max) => Math.random() * (max - min) + min;\n  return fetchRates()\n    .then(([usd, eur]) => [usd + randomize(-2, 2), eur + randomize(-2, 2)]);\n};\n\nexport {\n  fetchRatesUsdEur,\n}","import { createSelector } from '@reduxjs/toolkit';\n\nconst ratesReducerSelect = (state) => state.ratesReducer;\n\nexport const ratesIntervalSelect = (state) => ratesReducerSelect(state).settings.interval;\nexport const ratesMaxRowsSelect = (state) => ratesReducerSelect(state).settings.maxRows;\nexport const ratesDataSelect = (state) => ratesReducerSelect(state).rates;\n\nexport const ratesDataLimitedSelect = createSelector(\n  ratesMaxRowsSelect,\n  ratesDataSelect,\n  (maxRows, rates) => rates.slice(-maxRows)\n);","import { call, put, delay, select } from 'redux-saga/effects';\nimport { fetchRatesUsdEur } from './api';\nimport { ratesAddRate } from './ducks';\nimport { ratesIntervalSelect } from './selectors';\n\nexport function * ratesSaga() {\n  while (true) {\n    try {\n      const state = yield select();\n      const interval = ratesIntervalSelect(state);\n      const time = new Date().getTime();\n\n      const [usd, eur] = yield call(fetchRatesUsdEur);\n      yield put(ratesAddRate({\n        usd,\n        eur,\n        time\n      }));\n      yield delay(interval * 1000);\n    }\n    catch {}\n  }\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport format from 'date-fns/format';\nimport { LineChart, CartesianGrid, XAxis, YAxis, Tooltip, Legend, Line } from 'recharts';\n\nexport const RatesChart = ({ data, usdKey, eurKey, timeKey }) => {\n\n  if (!data || data.length === 0)\n    return null;\n\n  return (\n    <LineChart width={730} height={300} data={data}\n      margin={{ top: 5, right: 30, left: 20, bottom: 5 }}>\n      <CartesianGrid strokeDasharray=\"3 3\" />\n      <XAxis dataKey={timeKey}\n        tickFormatter={unixTime => format(unixTime, 'HH:mm:ss')}\n        domain={['dataMin', 'dataMax']}\n        type='number' />\n      <YAxis\n\n      />\n      <Tooltip labelFormatter={unixTime => format(unixTime, 'HH:mm:ss')} />\n      <Legend />\n      <Line type=\"monotone\" dataKey={usdKey} stroke=\"#8884d8\" />\n      <Line type=\"monotone\" dataKey={eurKey} stroke=\"#82ca9d\" />\n    </LineChart>\n  );\n}\n\nRatesChart.propTypes = {\n  data: PropTypes.array,\n  usdKey: PropTypes.string,\n  eurKey: PropTypes.string,\n  timeKey: PropTypes.string,\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport format from 'date-fns/format';\nimport './RatesTable.scss';\n\nexport const RatesTable = ({ data }) => {\n\n  const hasData = data && data.length > 0;\n\n  return (\n    <table className='rates-table'>\n      <thead>\n        <tr>\n          <th>Время</th>\n          <th>USD</th>\n          <th>EUR</th>\n        </tr>\n      </thead>\n      <tbody>\n        {hasData && data.map(({ time, usd, eur }) => (\n          <tr key={time}>\n            <td>{format(time, 'HH:mm:ss')}</td>\n            <td>{(+usd).toFixed(3)}</td>\n            <td>{(+eur).toFixed(3)}</td>\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  );\n}\n\nRatesTable.propTypes = {\n  data: PropTypes.array,\n};","import React from 'react';\nimport { useSelector } from 'react-redux'\nimport { RatesChart, RatesTable } from '../components';\nimport { ratesDataSelect, ratesDataLimitedSelect } from '../selectors';\n\n\nexport const RatesView = () => {\n  const data = useSelector(ratesDataSelect);\n  const rows = useSelector(ratesDataLimitedSelect);\n\n  return (\n    <>\n      <RatesChart data={data} usdKey='usd' eurKey='eur' timeKey='time' />\n      <RatesTable data={rows} />\n    </>\n  )\n}","export {\n  ratesAddRate, ratesResetRates, ratesSetInterval, ratesSetMaxRows,\n  ratesReducer\n} from './ducks'\nexport { ratesSaga } from './sagas';\nexport { RatesView } from './containers';\n","import { combineReducers } from 'redux';\nimport { ratesReducer } from './features/rates';\n\nconst rootReducer = combineReducers({\n  ratesReducer\n});\n\nexport default rootReducer;","import { fork } from 'redux-saga/effects';\nimport { ratesSaga } from './features/rates';\n\nexport function * rootSaga() {\n  yield fork(ratesSaga);\n}","import { createStore, applyMiddleware } from 'redux';\nimport createSagaMiddleware from 'redux-saga'\nimport rootReducer from '../reducers';\nimport { rootSaga } from '../sagas';\n\nconst sagaMiddleware = createSagaMiddleware();\n\nconst configureAppStore = preloadedState => {\n  const store = createStore(\n    rootReducer,\n    preloadedState,\n    applyMiddleware(sagaMiddleware)\n  );\n\n  sagaMiddleware.run(rootSaga);\n\n  return store;\n}\n\nexport default configureAppStore;","import React from 'react';\nimport configureStore from './store';\nimport { Provider } from 'react-redux'\nimport { RatesView } from './features/rates';\n\nconst store = configureStore();\n\nfunction App() {\n  return (\n    <Provider store={store}>\n      <div>\n        <RatesView />\n      </div>\n    </Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app';\n\nReactDOM.render(<App />, document.queryQuerySelector('#root'));\n"],"sourceRoot":""}